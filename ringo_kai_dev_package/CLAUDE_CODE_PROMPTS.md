'''
# りんご会♪ Claude Code用プロンプト集

## 1. はじめに

このドキュメントは、「りんご会♪」WebアプリケーションをClaude Codeで開発するためのプロンプト集です。各プロンプトをClaude Codeに渡すことで、効率的に開発を進めることができます。

**開発を始める前に、必ず `TECHNICAL_SPECIFICATION.md` と `SETUP_GUIDE.md` を読んでください。**

---

## 2. フロントエンド開発 (Next.js)

### プロンプト 2.1: TOPページの作成

```
以下の仕様に基づいて、Next.jsでTOPページを作成してください。

- **ファイルパス**: `/app/page.js`
- **UIフレームワーク**: Tailwind CSS
- **デザイン**: `TECHNICAL_SPECIFICATION.md` の「7. デザインシステム」セクションを参照
- **イラスト**: `/public/images/character/ringo_kai_main_character.png` を使用
- **コンポーネント**:
  - ヒーローセクション
    - 中央にキャラクターイラスト
    - サイト名「りんご会♪」
    - キャッチコピー「欲しいものを交換し合う、楽しいコミュニティ」
    - 「新規登録」ボタン（`/register` へのリンク）
    - 「ログイン」ボタン（`/login` へのリンク）
  - サイト説明セクション
    - 「りんご会♪とは？」
    - ユーザーフローの簡単な説明（①購入 → ②りんごを引く → ③欲しいものが買ってもらえる）
  - フッター
    - 利用規約、プライバシーポリシーへのリンク
```

### プロンプト 2.2: 認証ページの作成 (Supabase Auth)

```
Supabase Authを使用して、新規登録ページとログインページを作成してください。

- **ファイルパス**:
  - `/app/register/page.js`
  - `/app/login/page.js`
- **認証プロバイダー**: Email/Password
- **機能**:
  - 新規登録: メールアドレスとパスワードでユーザー登録
  - ログイン: メールアドレスとパスワードでログイン
  - ログアウト: ユーザーをログアウトさせる
- **UI**: シンプルで分かりやすいフォーム
- **リダイレクト**: ログイン後は `/dashboard` にリダイレクト
```

### プロンプト 2.3: ユーザーフローガードの作成

```
`TECHNICAL_SPECIFICATION.md` の「6. フロントエンド」セクションにある `UserFlowGuard.js` コンポーネントを実装してください。

- **目的**: ユーザーが正しい順序でサイトを利用するように強制する
- **機能**:
  - ユーザーの `status` をチェック
  - 条件を満たさない場合は、前のステップにリダイレクト
- **使用するフック**: `useUser` フック（ユーザー情報を取得）
```

### プロンプト 2.4: りんごを引くページと段階的公開アニメーションの実装

```
りんごを引くページと、24時間の段階的公開アニメーションを実装してください。

- **ファイルパス**: `/app/draw/page.js`
- **コンポーネント**: `AppleReveal.js`
- **イラスト**: `ASSETS_GUIDE.md` の「2. 段階的公開アニメーション用イラスト」セクションを参照
- **機能**:
  - りんごを引くボタン
  - 24時間のカウントダウンタイマー
  - 時間の経過に応じて、段階的にイラストを切り替える
  - 24時間経過後、完成版のりんごカードを表示
- **ロジック**: `ASSETS_GUIDE.md` の実装例を参考にしてください。
```

### プロンプト 2.5: チャットボットの実装

```
`CHATBOT_SPECIFICATION.md` に基づいて、りんごちゃんチャットボットを実装してください。

- **ファイルパス**: `/components/Chatbot.js`
- **アイコン**: `ASSETS_GUIDE.md` の「3. チャットボットアイコン」セクションを参照
- **機能**:
  - 右下に固定表示
  - クリックで開閉
  - ユーザーの状態に応じた自動メッセージ
  - OpenAI GPT-4 APIと連携し、自由な質問に回答
- **UI**: 吹き出し形式のメッセージ表示
```

---

## 3. バックエンド開発 (FastAPI)

### プロンプト 3.1: 動的RTP計算APIの作成

```
`DYNAMIC_RTP_SYSTEM.md` に基づいて、動的RTPを計算するAPIを作成してください。

- **ファイルパス**: `/api/batch/update-rtp`
- **トリガー**: 1日1回（バッチ処理）
- **ロジック**:
  1. 全ユーザーの `purchase_obligation` と `purchase_available` を合計
  2. `RTP = purchase_available / purchase_obligation` を計算
  3. RTPの値に応じて、毒りんごの確率を調整
  4. 新しい確率をデータベースに保存
- **考慮事項**: 新規ユーザーの成長率も考慮した予測RTPを実装
```

### プロンプト 3.2: OCR検証APIの作成

```
OpenAI GPT-4 Vision APIを使用して、スクリーンショットを検証するAPIを作成してください。

- **ファイルパス**: `/api/purchase/verify`
- **入力**: スクリーンショット画像
- **ロジック**:
  1. 画像を前処理（リサイズ、ノイズ除去）
  2. GPT-4 Vision APIに画像を渡し、注文番号、商品名、金額を抽出
  3. 抽出した情報と、データベースに記録された購入対象の商品情報を照合
  4. 結果が一致すれば、購入を承認（`status` を `approved` に更新）
  5. 一致しなければ、管理者に通知（`status` を `review_required` に更新）
```

---

## 4. データベース (Supabase)

### プロンプト 4.1: データベーススキーマの作成

```
`TECHNICAL_SPECIFICATION.md` の「4. データベーススキーマ」セクションにあるSQLを実行し、以下のテーブルを作成してください。

- `users`
- `purchases`
- `apples`
- `referrals`

また、各テーブルにRLS (Row Level Security) ポリシーを設定し、ユーザーが自分のデータにしかアクセスできないようにしてください。
```

---

## 5. デプロイ

### プロンプト 5.1: VercelとRenderへのデプロイ

```
`SETUP_GUIDE.md` の「7. デプロイ」セクションに従って、フロントエンドをVercelに、バックエンドをRenderにデプロイしてください。

- **フロントエンド (Vercel)**:
  - GitHubリポジトリを連携
  - 環境変数を設定
- **バックエンド (Render)**:
  - GitHubリポジトリを連携
  - ビルドコマンドとスタートコマンドを設定
  - 環境変数を設定
```
'''
