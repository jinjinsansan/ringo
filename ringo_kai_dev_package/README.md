# りんご会♪ 開発パッケージ

**「りんご会♪」** は、Amazonの欲しいものリストを交換し合う、ゲーム感覚のコミュニティプラットフォームです。このパッケージには、Claude Codeで開発を開始するために必要なすべての資料が含まれています。

---

## パッケージ内容

| ファイル/ディレクトリ | 説明 |
|-------------------|------|
| `README.md` | このファイル（開発パッケージの概要） |
| `TECHNICAL_SPECIFICATION.md` | 技術仕様書（アーキテクチャ、データベーススキーマ、API設計） |
| `SETUP_GUIDE.md` | セットアップガイド（開発環境の構築手順） |
| `CLAUDE_CODE_PROMPTS.md` | Claude Code用プロンプト集（開発を効率化するプロンプト） |
| `ringo_kai_assets.zip` | イラスト・アイコン素材（16枚の完璧なイラスト） |
| `ringo_kai_assets/ASSETS_GUIDE.md` | イラスト使用ガイド（各イラストの使用場所と実装例） |
| 設計ドキュメント（複数） | システム設計、確率設計、UI/UX設計、ユーザーフロー、管理者パネル、チャットボット |

---

## 開発の流れ

### ステップ1：設計ドキュメントを読む

以下のドキュメントを読んで、「りんご会♪」の全体像を理解してください。

1. **システム設計ドキュメント** (`oripa_system_design.md`)
2. **確率設計** (`probability_design_detailed.md`, `dynamic_rtp_system.md`)
3. **UI/UXデザイン** (`ringo_kai_ui_ux_design.md`)
4. **詳細なユーザーフロー** (`detailed_user_flow.md`)
5. **管理者パネル** (`admin_panel_specification.md`)
6. **チャットボット** (`chatbot_specification.md`)

### ステップ2：技術仕様書とセットアップガイドを読む

1. **技術仕様書** (`TECHNICAL_SPECIFICATION.md`)
2. **セットアップガイド** (`SETUP_GUIDE.md`)

### ステップ3：イラスト素材を配置する

1. `ringo_kai_assets.zip` を解凍します。
2. `ASSETS_GUIDE.md` を読んで、各イラストの使用場所を確認します。
3. イラストをNext.jsプロジェクトの `public/images` ディレクトリにコピーします。

### ステップ4：Claude Codeで開発を開始する

`CLAUDE_CODE_PROMPTS.md` に記載されているプロンプトを使用して、Claude Codeで開発を進めます。

---

## 技術スタック

| 用途 | サービス/ライブラリ |
|---|---|
| フロントエンド | Next.js (React) + Tailwind CSS |
| バックエンド | Python (FastAPI) |
| データベース | Supabase (PostgreSQL) |
| メール送信 | Resend |
| OCR検証 | OpenAI GPT-4 Vision API |
| チャットボット | OpenAI GPT-4 Turbo API |
| デプロイ | Vercel (フロントエンド), Render (バックエンド) |

---

## 主要な機能

### ユーザー機能
- **新規登録・ログイン**: メールアドレスとパスワードで登録・ログイン
- **欲しいものリスト登録**: Amazonの欲しいものリストのURLを登録
- **購入**: 他のユーザーの欲しいものリストから商品を購入
- **スクリーンショット提出**: 購入証明としてスクリーンショットを提出
- **りんご抽選**: 24時間後に結果がわかる、ドキドキ感のある抽選
- **購入免除チケット**: シルバー・ゴールド・赤りんごで獲得したチケットを使用
- **友達紹介**: 紹介コードで友達を招待し、上位りんごの確率を上げる
- **りんごちゃんチャットボット**: ユーザーの状態に応じた対話型サポート

### 管理者機能
- **ユーザー管理**: ユーザー一覧、詳細、編集、削除
- **購入検証管理**: スクリーンショットの確認、承認/却下
- **りんご抽選履歴**: 全ユーザーの抽選履歴を表示
- **動的RTP管理**: 確率の調整、RTPの表示
- **統計ダッシュボード**: ユーザー数、購入数、りんご種類別の割合
- **リアルタイムユーザー状態**: どのユーザーがどのりんごを引いているかをグループ分け表示
- **救済措置**: 毒りんごが連続したユーザーに赤いりんごを手動で付与

---

## 重要なポイント

### 1. ユーザーフローの順次実行
ユーザーは以下の順序でサイトを利用する必要があります。順番を飛ばすことはできません。

1. 新規登録
2. ログイン
3. 利用規約に同意
4. 使い方ページを読む
5. 誰かの欲しいものリストから商品を購入
6. スクリーンショットを提出
7. AI＆管理者による検証
8. 自分の欲しいものリストURLを登録
9. りんごを引く
10. 24時間後に結果を確認
11. 購入免除チケットを使用（シルバー・ゴールド・赤りんごの場合）

### 2. 動的RTP（Return To Player）
システムの整合性を保つため、購入義務と購入免除のバランスを自動的に調整します。RTPが高い場合は毒りんごの確率を上げ、低い場合は下げます。

### 3. 24時間の段階的公開アニメーション
りんごを引いた後、24時間かけて徐々に結果が明らかになります。これにより、ユーザーにドキドキ感を与えます。

### 4. 友達紹介精度の厳格化
友達紹介の回数に応じて、上位りんごの確率が上がります。ただし、シルバー・ゴールドを完了すると、紹介カウントがリセットされます。

---

## 開発のヒント

### Claude Codeへの渡し方

1. **設計ドキュメント**をすべてClaude Codeにアップロードします。
2. **技術仕様書**と**セットアップガイド**を読んでもらいます。
3. **イラスト素材**（`ringo_kai_assets.zip`）をアップロードし、解凍してもらいます。
4. **Claude Code用プロンプト集**に記載されているプロンプトを1つずつ渡して、開発を進めます。

### 開発の優先順位

1. **フロントエンド**: TOPページ → 認証ページ → ユーザーフローガード → りんごを引くページ → チャットボット
2. **バックエンド**: データベーススキーマ → 購入検証API → りんご抽選API → 動的RTP計算API
3. **統合**: フロントエンドとバックエンドを統合し、テスト
4. **デプロイ**: VercelとRenderにデプロイ

---

## サポート

開発中に不明な点がある場合は、以下のドキュメントを参照してください。

- **技術的な質問**: `TECHNICAL_SPECIFICATION.md`
- **セットアップの質問**: `SETUP_GUIDE.md`
- **イラストの使用方法**: `ASSETS_GUIDE.md`
- **Claude Codeの使い方**: `CLAUDE_CODE_PROMPTS.md`

---

## ライセンス

このプロジェクトは、プライベートプロジェクトです。無断での複製・配布は禁止されています。

---

## 作成者

**Manus AI** - 2024年12月27日

---

**開発を楽しんでください！りんご会♪を完璧に実装しましょう。**
